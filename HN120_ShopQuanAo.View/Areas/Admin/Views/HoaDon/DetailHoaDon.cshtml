@using HN120_ShopQuanAo.Data.Models;
@using HN120_ShopQuanAo.View.Areas.Admin.Data
@model HN120_ShopQuanAo.View.Areas.Admin.Data.HoaDonWithDetailsViewModel

@{
    // Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "DetailHoaDon";
    IEnumerable<ChiTietSPView> litspctview = ViewBag.JoinedData as IEnumerable<ChiTietSPView>;
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" integrity="sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js" integrity="sha512-WW8/jxkELe2CAiE4LvQfwm1rajOS8PHasCCx+knHG0gBHt8EXxS6T6tJRTGuDQVnluuAvMxWF4j8SNFDKceLFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script src="~/js/Hoadon/CapNhatChiTietHoaDon.js"></script>
<h2>Chi Tiết Hóa Đơn</h2>

<div>
    <h4>Hóa Đơn</h4>     
    <hr />
    <table class="table table-bordered">
        <div class="col-md-2">
            <input id="btn_mahoadon" value="@Model.HoaDon.MaHoaDon" type="text" style="display:none" />
        </div>

        <thead>
            <tr>               
                <th>Mã hóa đơn</th>
                <th>Ngày tạo</th>
                <th>Tên khách hàng</th>
                <th>Số điện thoại</th>
                <th>Phí ship</th>
                <th>Tổng giá trị</th>
                <th>phương thức thanh toán</th>
                <th>trạng thái</th>
            </tr>
        </thead>
        <tbody>      
                <tr>                 
                 <td>@Model.HoaDon.MaHoaDon</td>
                <td>@Model.HoaDon.NgayTaoDon</td>
                <td>@Model.HoaDon.TenKhachHang</td>
                <td>@Model.HoaDon.SoDienThoai</td>
                <td>@Model.HoaDon.PhiShip</td>
                <td>@Model.HoaDon.TongGiaTriHangHoa</td>
                <td>@Model.HoaDon.PhuongThucThanhToan</td>               
                @if (Model.HoaDon.TrangThai == 1)
                  {
                      <td>Chờ xác nhận</td>
                      
                  }
                @if (Model.HoaDon.TrangThai == 2)
                  {
                    <td>Đã xác nhận</td>
                      
                  }
                @if (Model.HoaDon.TrangThai == 3)
                  {
                    <td>Chờ giao hàng</td>
                      
                  }
                @if (Model.HoaDon.TrangThai == 4)
                  {
                    <td>Đang giao hàng</td>
                      
                  }
                @if (Model.HoaDon.TrangThai == 5)
                  {
                    <td>Hoàn thành</td>
                      
                  }
                 @if (Model.HoaDon.TrangThai == 6)
                  {
                    <td>Đã hủy</td>
                      
                  }
                
            </tr>
        </tbody>

    </table>
</div>

<div>
    <div class="row">
        <div class="col-md-10">
            <h4>Chi Tiết Hóa Đơn</h4>
        </div>
      <div class="col-md-2">
            <button class="btn btn-primary"  type="button" id="btn_capnhat">Cập nhật</button>
      </div>
    </div>
   
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>STT</th>
                <th>SKU</th>
                <th>Mã hóa đơn</th>
                <th>Tên sản phẩm</th>
                <th>Đơn giá</th>
                <th>Số lượng mua</th>
                <th>Hành động</th>

            </tr>
        </thead>
        <tbody>
            @{
                int i = 1;

            }
            @foreach (var item in Model.HoaDonChiTiets)
            {

                <tr>
                    <td>@i</td>
                    <td>@item.SKU</td>
                    <td>@item.MaHoaDon</td>
                    <td>@item.TenSp</td>
                    <td>@item.DonGia</td>
                    <td>@item.SoLuongMua</td>                   
                    <td>
                      
                        <button type="button" class="btn btn-secondary mb-1 btn_dell" id="btn_popxoa" data-id="@item.MaHoaDonChiTiet">
                            Xóa
                        </button>
                    </td>

                </tr>
                i++;
            }
        </tbody>
        <button class="btn btn-primary" type="button" id="btn_pop_sp">Thêm sản phẩm</button>
    </table>
</div>

<div class="modal fade" tabindex="-1" id="pop">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-body">
                    <div style="display:none">
                       <input type="type" name="name" id="in_ma"/>
                   </div>
                   <p>Bạn có muốn xóa sản phẩm này không?</p>
                   
                </div>
            </div>
            <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btn_dell">Xóa</button>
                </div>
        </div>
    </div>
</div>


<div class="modal fade" tabindex="-1" id="pop2">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-body">
                    <div>
                        <label for="inp_soluongmua" class="form-control">Nhập số lượng muốn thêm</label>
                        <input type="number" class="form-control" name="name" id="inp_soluongmua" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btn_themsoluong">Thêm</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" tabindex="-1" id="pop_sp">
    <div class="modal-dialog  modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card-body" style="height: 630px; overflow-y: auto;">
                    @Html.Partial("SP_partial", litspctview)
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btn_savecthd">Save changes</button>
            </div>
        </div>
    </div>
</div>
